{"version":3,"sources":["imgur.js","imgur.min.js"],"names":["global","factory","exports","module","require","define","amd","imgur","request","this","extend","key","obj","i","result","arguments","length","hasOwnProperty","galleryEndpoint","windowType","endpointPath","postEndpoint","endpoint","path","apiUrl","utils","API_URL","API_VERSION","get","topic","sort","page","window","undefined","requestPath","SEARCH","RANDOM","options","buildOptions","imgurAPICall","post","CLIENT_ID","method","body","bearer","additionalHeaders","forEach","option","Error","authToken","send","set","promise","bind","imageEndpoint","hash","albumEndpoint","oauth2Endpoint","responseType","resType","queryString","join","refresh","refreshToken","clientSecret","topicsEndpoint","topicId","getDefaults","galleryPostEndpoint__postOptions","galleryPostEndpoint","REASON_DOES_NOT_BELONG_ON_IMGUR","report","reason","_handleVote","voteType","upvote","downvote","favorite","isAlbum","postType","comments","subredditPostEndpoint__postOptions","subredditPostEndpoint","subreddit","gallery","section","showViral","WEEK","ALL","tag","search","random","commentEndpoint","commentId","deleteComment","submitComment","params","console","log","submitReply","clientKey","bearerKey","setUtil","value","getUtil","image","album","oauth2","topics","comment"],"mappings":"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","file":"imgur.min.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('superagent-bluebird-promise')) :\n  typeof define === 'function' && define.amd ? define(['superagent-bluebird-promise'], factory) :\n  global.imgur = factory(global.request)\n}(this, function (request) { 'use strict';\n\n  var utils = {\n      API_URL: 'https://api.imgur.com',\n      API_VERSION: '3',\n      CLIENT_ID: '',\n      buildOptions: (apiUrl, path, method, body = {}) => {\n          return { apiUrl, path, method, body };\n      },\n      bearer: '',\n      additionalHeaders: {}\n  };\n\n  function extend() {\n    var key, obj, result = {}, i;\n    for (i = 0; i <= arguments.length; i++) {\n      obj = arguments[i];\n      for (key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          result[key] = obj[key];\n        } else {\n        }\n      }\n    }\n    return result;\n  }\n\n  var imgurAPICall = function(options) {\n      ['method', 'apiUrl', 'path', 'body'].forEach(option => {\n          if (!options[option]) {\n              throw new Error(`${option} must be specified`);\n          }\n      });\n\n      let authToken = `Client-ID ${utils.CLIENT_ID}`;\n\n      if(utils.bearer) {\n          authToken = `Bearer ${utils.bearer}`;\n      }\n\n      return request[options.method](`${options.apiUrl}/${options.path}`)\n          .send(options.body)\n          .set('Authorization', authToken)\n          .set(utils.additionalHeaders)\n          .promise();\n  };\n\n  var endpoint = function(options) {\n      options.imgurAPICall = imgurAPICall.bind(options);\n      options.apiUrl = options.apiUrl || `${utils.API_URL}/${utils.API_VERSION}`;\n\n      return options;\n  }\n\n  var imageEndpoint = endpoint({\n      path: 'image',\n      apiUrl: `${utils.API_URL}/${utils.API_VERSION}`,\n      get(hash) {\n          const options = utils.buildOptions(this.apiUrl, `${this.path}/${hash}`, 'get');\n\n          return this.imgurAPICall(options);\n      }\n  });\n\n  var albumEndpoint = endpoint({\n      path: 'album',\n      apiUrl: `${utils.API_URL}/${utils.API_VERSION}`,\n      get(hash) {\n          const options = utils.buildOptions(this.apiUrl, `${this.path}/${hash}`, 'get');\n\n          return this.imgurAPICall(options);\n      }\n  });\n\n  var oauth2Endpoint = endpoint({\n      path: 'oauth2',\n      apiUrl: utils.API_URL,\n      get(responseType) {\n          const resType = responseType || 'token';\n          const queryString = '?' + [\n              `response_type=${resType}`,\n              `client_id=${utils.CLIENT_ID}`\n        ].join('&');\n\n          const path = `${this.path}/authorize${queryString}`;\n          const options = utils.buildOptions(this.apiUrl, path, 'get');\n\n          return this.imgurAPICall(options);\n      },\n      refresh(refreshToken, clientSecret) {\n          const queryString = '?' + [\n              `refresh_token=${refreshToken}`,\n              `client_id=${utils.CLIENT_ID}`,\n              `client_secret=${clientSecret}`,\n              'grant_type=refresh_token'\n          ].join('&');\n\n          const path = `${this.path}/token${queryString}`;\n          const options = utils.buildOptions(this.apiUrl, path, 'post');\n\n          return this.imgurAPICall(options);\n      }\n  });\n\n  var topicsEndpoint = endpoint({\n      path: 'topics',\n      apiUrl: `${utils.API_URL}/${utils.API_VERSION}`,\n      get(topicId, sort='viral', page=0) {\n          const requestPath = `${this.path}/${topicId}/${sort}/${page}`;\n          const options = utils.buildOptions(this.apiUrl, requestPath, 'get');\n\n          return this.imgurAPICall(options);\n      },\n      getDefaults() {\n          const requestPath = `${this.path}/defaults`;\n          const options = utils.buildOptions(this.apiUrl, requestPath, 'get');\n\n          return this.imgurAPICall(options);\n      }\n  });\n\n  const galleryPostEndpoint__postOptions = {\n      path: 'gallery',\n      apiUrl: `${utils.API_URL}/${utils.API_VERSION}`\n};\n\n  var galleryPostEndpoint = endpoint(extend({}, galleryPostEndpoint__postOptions, {\n      REASON_DOES_NOT_BELONG_ON_IMGUR: 1,\n      get(hash) {\n          const path = `${this.path}/${hash}`;\n          const options = utils.buildOptions(this.apiUrl, path, 'get');\n\n          return this.imgurAPICall(options);\n      },\n      report(hash, reason = this.REASON_DOES_NOT_BELONG_ON_IMGUR) {\n          if(!hash) { throw new Error('hash must be specified'); }\n\n          if(typeof reason !== 'number') {\n              throw new Error('the reason must be an integer');\n          }\n\n          const path = `${this.path}/${hash}/report`;\n          const options = utils.buildOptions(this.apiUrl, path, 'post', { reason });\n\n          return this.imgurAPICall(options);\n      },\n      _handleVote(hash, voteType) {\n          if(!hash) { throw new Error('hash must be specified'); }\n\n          const path = `${this.path}/${hash}/vote/${voteType}`;\n          const options = utils.buildOptions(this.apiUrl, path, 'post');\n\n          return this.imgurAPICall(options);\n      },\n      upvote(hash) {\n          return this._handleVote(hash, 'up');\n      },\n      downvote(hash) {\n          return this._handleVote(hash, 'down');\n      },\n      favorite(hash, isAlbum) {\n          if(!hash) { throw new Error('hash must be specified'); }\n\n          if(isAlbum === undefined || typeof(isAlbum) !== 'boolean') {\n              throw new Error('isAlbum with type boolean must be specified');\n          }\n\n          const postType = isAlbum ? 'album' : 'image';\n          //doesn't use gallery path because it could be a non gallery item\n          const path = `${postType}/${hash}/favorite`;\n          const options =  utils.buildOptions(this.apiUrl, path, 'post');\n\n          return this.imgurAPICall(options);\n      },\n      comments: endpoint(extend({}, galleryPostEndpoint__postOptions, {\n          get(hash, sort='best') {\n              const path = `${this.path}/${hash}/comments/${sort}`;\n              const options = utils.buildOptions(this.apiUrl, path, 'get');\n\n              return this.imgurAPICall(options);\n          }\n      }))\n  }));\n\n  const subredditPostEndpoint__postOptions = {\n      path: 'gallery/r',\n      apiUrl: `${utils.API_URL}/${utils.API_VERSION}`\n};\n\n  var subredditPostEndpoint = endpoint(extend({}, subredditPostEndpoint__postOptions, {\n      get(hash, subreddit) {\n          if(!hash) { throw new Error('hash must be specified'); }\n          if(!subreddit) { throw new Error('subreddit must be specified'); }\n          const path = `${this.path}/${subreddit}/${hash}`;\n          const options = utils.buildOptions(this.apiUrl, path, 'get');\n\n          return this.imgurAPICall(options);\n      }\n  }));\n\n  const SEARCH = 'search';\n  const RANDOM = 'random/random';\n\n  const gallery = endpoint({\n      path: 'gallery',\n      apiUrl: `${utils.API_URL}/${utils.API_VERSION}`,\n      get(section='hot', sort='viral', page=0, showViral=true) {\n          const requestPath = `${this.path}/${section}/${sort}/${page}?showViral=${showViral}`;\n          const options = utils.buildOptions(this.apiUrl, requestPath, 'get');\n\n          return this.imgurAPICall(options);\n      },\n      post: galleryPostEndpoint\n  });\n\n  function galleryEndpoint(windowType, endpointPath, postEndpoint) {\n      return endpoint({\n          path: `gallery/${endpointPath}`,\n          apiUrl: `${utils.API_URL}/${utils.API_VERSION}`,\n          get(topic, sort, page, window = windowType) {\n              let requestPath;\n\n              switch (endpointPath) {\n                  case SEARCH:\n                      requestPath = `${this.path}/${sort}/${window}/${page}?q_all=${topic}`;\n                      break;\n                  case RANDOM:\n                      requestPath = `${this.path}/${page}`;\n                      break;\n                  default:\n                      requestPath = `${this.path}/${topic}/${sort}/${window}/${page}`;\n                      break;\n              }\n\n              const options = utils.buildOptions(this.apiUrl, requestPath, 'get');\n\n              return this.imgurAPICall(options);\n          },\n          post: postEndpoint,\n      });\n  }\n\n  const WEEK = 'week';\n  const ALL = 'all';\n  const subreddit = galleryEndpoint(WEEK, 'r', subredditPostEndpoint);\n  const tag = galleryEndpoint(WEEK, 't', galleryPostEndpoint);\n  const search = galleryEndpoint(ALL, SEARCH, galleryPostEndpoint);\n  const topic = galleryEndpoint(ALL, 'topic', galleryPostEndpoint);\n  const random = galleryEndpoint(null, RANDOM, galleryPostEndpoint);\n\n  var commentEndpoint = endpoint({\n      path: 'comment',\n      apiUrl: `${utils.API_URL}/${utils.API_VERSION}`,\n      REASON_DOES_NOT_BELONG_ON_IMGUR: 1,\n      get(commentId) {\n          if(!commentId) { throw new Error('commentId must be specified'); }\n\n          const path = `${this.path}/${commentId}`;\n          const options = utils.buildOptions(this.apiUrl, path, 'get');\n\n          return this.imgurAPICall(options);\n      },\n      downvote(commentId) {\n          if(!commentId) { throw new Error('commentId must be specified'); }\n\n          const path = `${this.path}/${commentId}/vote/down`;\n          const options = utils.buildOptions(this.apiUrl, path, 'post');\n\n          return this.imgurAPICall(options);\n      },\n      upvote(commentId) {\n          if(!commentId) { throw new Error('commentId must be specified'); }\n\n          const path = `${this.path}/${commentId}/vote/up`;\n          const options = utils.buildOptions(this.apiUrl, path, 'post');\n\n          return this.imgurAPICall(options);\n      },\n      report(commentId, reason = this.REASON_DOES_NOT_BELONG_ON_IMGUR) {\n          if(!commentId) { throw new Error('commentId must be specified'); }\n\n          if(typeof reason !== 'number') {\n              throw new Error('the reason must be an integer');\n          }\n\n          const path = `${this.path}/${commentId}/report`;\n          const options = utils.buildOptions(this.apiUrl, path, 'post', { reason });\n\n          return this.imgurAPICall(options);\n      },\n      deleteComment(commentId) {\n          if(!commentId) { throw new Error('commentId must be specified'); }\n\n          const path = `${this.path}/${commentId}`;\n          const options = utils.buildOptions(this.apiUrl, path, 'del');\n\n          return this.imgurAPICall(options);\n      },\n      submitComment(params) {\n          ['image_id', 'comment'].forEach(option => {\n              console.log(!params[option]);\n              if (!params[option]) {\n                  throw new Error(`${option} must be specified`);\n              }\n          });\n\n          const options = utils.buildOptions(this.apiUrl, this.path, 'post', params);\n          return this.imgurAPICall(options);\n      },\n      submitReply(params) {\n          ['image_id', 'comment', 'parent_id'].forEach(option => {\n              if (!params[option]) {\n                  throw new Error(`${option} must be specified`);\n              }\n          });\n\n          const options = utils.buildOptions(this.apiUrl, this.path, 'post', params);\n          return this.imgurAPICall(options);\n      }\n  });\n\n  var imgur = function(clientKey, bearerKey) {\n      let setUtil = function(key, value) {\n          utils[key] = value;\n      };\n\n      let getUtil = function(key) {\n          return utils[key];\n      };\n\n      if (!clientKey) {\n          throw new Error('Client Key required to initialize imgur client');\n      }\n\n      setUtil('CLIENT_ID', clientKey);\n\n      if(bearerKey) {\n          setUtil('bearer', bearerKey);\n      }\n\n      return {\n          imgurAPICall,\n          CLIENT_ID: clientKey,\n          image: imageEndpoint,\n          album: albumEndpoint,\n          oauth2: oauth2Endpoint,\n          topics: topicsEndpoint,\n          gallery,\n          subreddit,\n          tag,\n          search,\n          topic,\n          random,\n          comment: commentEndpoint,\n          setUtil,\n          getUtil\n      };\n  }\n\n  return imgur;\n\n}));\n//# sourceMappingURL=./imgur.js.map","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('superagent-bluebird-promise')) : typeof define === 'function' && define.amd ? define(['superagent-bluebird-promise'], factory) : global.imgur = factory(global.request);\n})(this, function (request) {\n    'use strict';\n\n    var utils = {\n        API_URL: 'https://api.imgur.com',\n        API_VERSION: '3',\n        CLIENT_ID: '',\n        buildOptions: function buildOptions(apiUrl, path, method) {\n            var body = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];\n\n            return { apiUrl: apiUrl, path: path, method: method, body: body };\n        },\n        bearer: '',\n        additionalHeaders: {}\n    };\n\n    function extend() {\n        var key,\n            obj,\n            result = {},\n            i;\n        for (i = 0; i <= arguments.length; i++) {\n            obj = arguments[i];\n            for (key in obj) {\n                if (obj.hasOwnProperty(key)) {\n                    result[key] = obj[key];\n                } else {}\n            }\n        }\n        return result;\n    }\n\n    var imgurAPICall = function imgurAPICall(options) {\n        ['method', 'apiUrl', 'path', 'body'].forEach(function (option) {\n            if (!options[option]) {\n                throw new Error(option + ' must be specified');\n            }\n        });\n\n        var authToken = 'Client-ID ' + utils.CLIENT_ID;\n\n        if (utils.bearer) {\n            authToken = 'Bearer ' + utils.bearer;\n        }\n\n        return request[options.method](options.apiUrl + '/' + options.path).send(options.body).set('Authorization', authToken).set(utils.additionalHeaders).promise();\n    };\n\n    var endpoint = function endpoint(options) {\n        options.imgurAPICall = imgurAPICall.bind(options);\n        options.apiUrl = options.apiUrl || utils.API_URL + '/' + utils.API_VERSION;\n\n        return options;\n    };\n\n    var imageEndpoint = endpoint({\n        path: 'image',\n        apiUrl: utils.API_URL + '/' + utils.API_VERSION,\n        get: function get(hash) {\n            var options = utils.buildOptions(this.apiUrl, this.path + '/' + hash, 'get');\n\n            return this.imgurAPICall(options);\n        }\n    });\n\n    var albumEndpoint = endpoint({\n        path: 'album',\n        apiUrl: utils.API_URL + '/' + utils.API_VERSION,\n        get: function get(hash) {\n            var options = utils.buildOptions(this.apiUrl, this.path + '/' + hash, 'get');\n\n            return this.imgurAPICall(options);\n        }\n    });\n\n    var oauth2Endpoint = endpoint({\n        path: 'oauth2',\n        apiUrl: utils.API_URL,\n        get: function get(responseType) {\n            var resType = responseType || 'token';\n            var queryString = '?' + ['response_type=' + resType, 'client_id=' + utils.CLIENT_ID].join('&');\n\n            var path = this.path + '/authorize' + queryString;\n            var options = utils.buildOptions(this.apiUrl, path, 'get');\n\n            return this.imgurAPICall(options);\n        },\n        refresh: function refresh(refreshToken, clientSecret) {\n            var queryString = '?' + ['refresh_token=' + refreshToken, 'client_id=' + utils.CLIENT_ID, 'client_secret=' + clientSecret, 'grant_type=refresh_token'].join('&');\n\n            var path = this.path + '/token' + queryString;\n            var options = utils.buildOptions(this.apiUrl, path, 'post');\n\n            return this.imgurAPICall(options);\n        }\n    });\n\n    var topicsEndpoint = endpoint({\n        path: 'topics',\n        apiUrl: utils.API_URL + '/' + utils.API_VERSION,\n        get: function get(topicId) {\n            var sort = arguments.length <= 1 || arguments[1] === undefined ? 'viral' : arguments[1];\n            var page = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];\n\n            var requestPath = this.path + '/' + topicId + '/' + sort + '/' + page;\n            var options = utils.buildOptions(this.apiUrl, requestPath, 'get');\n\n            return this.imgurAPICall(options);\n        },\n        getDefaults: function getDefaults() {\n            var requestPath = this.path + '/defaults';\n            var options = utils.buildOptions(this.apiUrl, requestPath, 'get');\n\n            return this.imgurAPICall(options);\n        }\n    });\n\n    var galleryPostEndpoint__postOptions = {\n        path: 'gallery',\n        apiUrl: utils.API_URL + '/' + utils.API_VERSION\n    };\n\n    var galleryPostEndpoint = endpoint(extend({}, galleryPostEndpoint__postOptions, {\n        REASON_DOES_NOT_BELONG_ON_IMGUR: 1,\n        get: function get(hash) {\n            var path = this.path + '/' + hash;\n            var options = utils.buildOptions(this.apiUrl, path, 'get');\n\n            return this.imgurAPICall(options);\n        },\n        report: function report(hash) {\n            var reason = arguments.length <= 1 || arguments[1] === undefined ? this.REASON_DOES_NOT_BELONG_ON_IMGUR : arguments[1];\n\n            if (!hash) {\n                throw new Error('hash must be specified');\n            }\n\n            if (typeof reason !== 'number') {\n                throw new Error('the reason must be an integer');\n            }\n\n            var path = this.path + '/' + hash + '/report';\n            var options = utils.buildOptions(this.apiUrl, path, 'post', { reason: reason });\n\n            return this.imgurAPICall(options);\n        },\n        _handleVote: function _handleVote(hash, voteType) {\n            if (!hash) {\n                throw new Error('hash must be specified');\n            }\n\n            var path = this.path + '/' + hash + '/vote/' + voteType;\n            var options = utils.buildOptions(this.apiUrl, path, 'post');\n\n            return this.imgurAPICall(options);\n        },\n        upvote: function upvote(hash) {\n            return this._handleVote(hash, 'up');\n        },\n        downvote: function downvote(hash) {\n            return this._handleVote(hash, 'down');\n        },\n        favorite: function favorite(hash, isAlbum) {\n            if (!hash) {\n                throw new Error('hash must be specified');\n            }\n\n            if (isAlbum === undefined || typeof isAlbum !== 'boolean') {\n                throw new Error('isAlbum with type boolean must be specified');\n            }\n\n            var postType = isAlbum ? 'album' : 'image';\n            //doesn't use gallery path because it could be a non gallery item\n            var path = postType + '/' + hash + '/favorite';\n            var options = utils.buildOptions(this.apiUrl, path, 'post');\n\n            return this.imgurAPICall(options);\n        },\n        comments: endpoint(extend({}, galleryPostEndpoint__postOptions, {\n            get: function get(hash) {\n                var sort = arguments.length <= 1 || arguments[1] === undefined ? 'best' : arguments[1];\n\n                var path = this.path + '/' + hash + '/comments/' + sort;\n                var options = utils.buildOptions(this.apiUrl, path, 'get');\n\n                return this.imgurAPICall(options);\n            }\n        }))\n    }));\n\n    var subredditPostEndpoint__postOptions = {\n        path: 'gallery/r',\n        apiUrl: utils.API_URL + '/' + utils.API_VERSION\n    };\n\n    var subredditPostEndpoint = endpoint(extend({}, subredditPostEndpoint__postOptions, {\n        get: function get(hash, subreddit) {\n            if (!hash) {\n                throw new Error('hash must be specified');\n            }\n            if (!subreddit) {\n                throw new Error('subreddit must be specified');\n            }\n            var path = this.path + '/' + subreddit + '/' + hash;\n            var options = utils.buildOptions(this.apiUrl, path, 'get');\n\n            return this.imgurAPICall(options);\n        }\n    }));\n\n    var SEARCH = 'search';\n    var RANDOM = 'random/random';\n\n    var gallery = endpoint({\n        path: 'gallery',\n        apiUrl: utils.API_URL + '/' + utils.API_VERSION,\n        get: function get() {\n            var section = arguments.length <= 0 || arguments[0] === undefined ? 'hot' : arguments[0];\n            var sort = arguments.length <= 1 || arguments[1] === undefined ? 'viral' : arguments[1];\n            var page = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];\n            var showViral = arguments.length <= 3 || arguments[3] === undefined ? true : arguments[3];\n\n            var requestPath = this.path + '/' + section + '/' + sort + '/' + page + '?showViral=' + showViral;\n            var options = utils.buildOptions(this.apiUrl, requestPath, 'get');\n\n            return this.imgurAPICall(options);\n        },\n        post: galleryPostEndpoint\n    });\n\n    function galleryEndpoint(windowType, endpointPath, postEndpoint) {\n        return endpoint({\n            path: 'gallery/' + endpointPath,\n            apiUrl: utils.API_URL + '/' + utils.API_VERSION,\n            get: function get(topic, sort, page) {\n                var window = arguments.length <= 3 || arguments[3] === undefined ? windowType : arguments[3];\n\n                var requestPath = undefined;\n\n                switch (endpointPath) {\n                    case SEARCH:\n                        requestPath = this.path + '/' + sort + '/' + window + '/' + page + '?q_all=' + topic;\n                        break;\n                    case RANDOM:\n                        requestPath = this.path + '/' + page;\n                        break;\n                    default:\n                        requestPath = this.path + '/' + topic + '/' + sort + '/' + window + '/' + page;\n                        break;\n                }\n\n                var options = utils.buildOptions(this.apiUrl, requestPath, 'get');\n\n                return this.imgurAPICall(options);\n            },\n            post: postEndpoint\n        });\n    }\n\n    var WEEK = 'week';\n    var ALL = 'all';\n    var subreddit = galleryEndpoint(WEEK, 'r', subredditPostEndpoint);\n    var tag = galleryEndpoint(WEEK, 't', galleryPostEndpoint);\n    var search = galleryEndpoint(ALL, SEARCH, galleryPostEndpoint);\n    var topic = galleryEndpoint(ALL, 'topic', galleryPostEndpoint);\n    var random = galleryEndpoint(null, RANDOM, galleryPostEndpoint);\n\n    var commentEndpoint = endpoint({\n        path: 'comment',\n        apiUrl: utils.API_URL + '/' + utils.API_VERSION,\n        REASON_DOES_NOT_BELONG_ON_IMGUR: 1,\n        get: function get(commentId) {\n            if (!commentId) {\n                throw new Error('commentId must be specified');\n            }\n\n            var path = this.path + '/' + commentId;\n            var options = utils.buildOptions(this.apiUrl, path, 'get');\n\n            return this.imgurAPICall(options);\n        },\n        downvote: function downvote(commentId) {\n            if (!commentId) {\n                throw new Error('commentId must be specified');\n            }\n\n            var path = this.path + '/' + commentId + '/vote/down';\n            var options = utils.buildOptions(this.apiUrl, path, 'post');\n\n            return this.imgurAPICall(options);\n        },\n        upvote: function upvote(commentId) {\n            if (!commentId) {\n                throw new Error('commentId must be specified');\n            }\n\n            var path = this.path + '/' + commentId + '/vote/up';\n            var options = utils.buildOptions(this.apiUrl, path, 'post');\n\n            return this.imgurAPICall(options);\n        },\n        report: function report(commentId) {\n            var reason = arguments.length <= 1 || arguments[1] === undefined ? this.REASON_DOES_NOT_BELONG_ON_IMGUR : arguments[1];\n\n            if (!commentId) {\n                throw new Error('commentId must be specified');\n            }\n\n            if (typeof reason !== 'number') {\n                throw new Error('the reason must be an integer');\n            }\n\n            var path = this.path + '/' + commentId + '/report';\n            var options = utils.buildOptions(this.apiUrl, path, 'post', { reason: reason });\n\n            return this.imgurAPICall(options);\n        },\n        deleteComment: function deleteComment(commentId) {\n            if (!commentId) {\n                throw new Error('commentId must be specified');\n            }\n\n            var path = this.path + '/' + commentId;\n            var options = utils.buildOptions(this.apiUrl, path, 'del');\n\n            return this.imgurAPICall(options);\n        },\n        submitComment: function submitComment(params) {\n            ['image_id', 'comment'].forEach(function (option) {\n                console.log(!params[option]);\n                if (!params[option]) {\n                    throw new Error(option + ' must be specified');\n                }\n            });\n\n            var options = utils.buildOptions(this.apiUrl, this.path, 'post', params);\n            return this.imgurAPICall(options);\n        },\n        submitReply: function submitReply(params) {\n            ['image_id', 'comment', 'parent_id'].forEach(function (option) {\n                if (!params[option]) {\n                    throw new Error(option + ' must be specified');\n                }\n            });\n\n            var options = utils.buildOptions(this.apiUrl, this.path, 'post', params);\n            return this.imgurAPICall(options);\n        }\n    });\n\n    var imgur = function imgur(clientKey, bearerKey) {\n        var setUtil = function setUtil(key, value) {\n            utils[key] = value;\n        };\n\n        var getUtil = function getUtil(key) {\n            return utils[key];\n        };\n\n        if (!clientKey) {\n            throw new Error('Client Key required to initialize imgur client');\n        }\n\n        setUtil('CLIENT_ID', clientKey);\n\n        if (bearerKey) {\n            setUtil('bearer', bearerKey);\n        }\n\n        return {\n            imgurAPICall: imgurAPICall,\n            CLIENT_ID: clientKey,\n            image: imageEndpoint,\n            album: albumEndpoint,\n            oauth2: oauth2Endpoint,\n            topics: topicsEndpoint,\n            gallery: gallery,\n            subreddit: subreddit,\n            tag: tag,\n            search: search,\n            topic: topic,\n            random: random,\n            comment: commentEndpoint,\n            setUtil: setUtil,\n            getUtil: getUtil\n        };\n    };\n\n    return imgur;\n});\n//# sourceMappingURL=./imgur.js.map"]}